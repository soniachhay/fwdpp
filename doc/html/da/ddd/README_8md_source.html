<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fwdpp: /home/molpopgen/src/fwdpp/README.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fwdpp
   &#160;<span id="projectnumber">0.8.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/molpopgen/src/fwdpp/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../da/ddd/README_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;   fwdpp - A C++ template library for forward-time population genetic simulations</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  Copyright (C) 2013 Kevin Thornton</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  fwdpp is free software; you can redistribute it and/or modify</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  it under the terms of the GNU General Public License as published by</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  the Free Software Foundation; either version 2 of the License, or</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  (at your option) any later version.</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  This program is distributed in the hope that it will be useful,</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  but WITHOUT ANY WARRANTY; without even the implied warranty of</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;  GNU General Public License for more details.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;  You should have received a copy of the GNU General Public License</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  along with this program; if not, write to the Free Software</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;Comments are welcome.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;   - Kevin Thornton &lt;krthornt@uci.edu&gt;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;# Preface</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;This README is the main page of the fwdpp documentation.  It may display some things oddly when viewed on GitHub and/or links to other documentation pages may be broken.  These issues are not bugs -- please see the Reference Manual at the [fwdpp home page](http://molpopgen.github.io/fwdpp/) for a fully-formatted version of this document.</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;# Using simulations in Python</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;If you are reading this, I&#39;m guessing that you are more interested in _running_ forward simulations than you are in _developing_ them.  This package is about the latter.  I&#39;d recommend that you check out [fwdpy11](http://molpopgen.github.io/fwdpy11), which is a Python package for running forward simulations and processing the output.  [fwdpy11](http://molpopgen.github.io/fwdpy11) is developed using fwdpp (this package).  [fwdpy11](http://molpopgen.github.io/fwdpy11) is obtainable from GitHub and will soon be avalable from [PyPi](http://pypi.python.org) or via the [bioconda](https://bioconda.github.io/) channel of [Anaconda](https://www.continuum.io/downloads).</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;fwdpy11 replaces [fwdpy](http://molpopgen.github.io/fwdpy), which was a Cython-based package for enabling fwdpp-based</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;simulations in Python.  We&#39;ve end-of-life&#39;d that project, but it is still on PyPi/Bioconda/GitHub for archival purposes,</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;as a couple of publications used it.  Trust us, though, [fwdpy11](http://molpopgen.github.io/fwdpy11) does everything</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;fwdpy did, but better.</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;# fwdpp-users mailing list</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;There is a [Google Group](https://groups.google.com/forum/#!forum/fwdpp-users) for fwdpp users.  It is called fwdpp-users.  I prefer that questions, etc., are raised there.  Questions on that list that are determined to be real issues will result in issue tickets on the GitHub repo for this site.  The group is also a good place for installation help, use questions, etc.</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;# Build status</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;* Status of master branch: [![Build Status](https://travis-ci.org/molpopgen/fwdpp.svg?branch=master)](https://travis-ci.org/molpopgen/fwdpp) [![CircleCI](https://circleci.com/gh/molpopgen/fwdpp/tree/master.svg?style=svg)](https://circleci.com/gh/molpopgen/fwdpp/tree/master)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;* Status of dev branch: [![Build Status](https://travis-ci.org/molpopgen/fwdpp.svg?branch=dev)](https://travis-ci.org/molpopgen/fwdpp) [![CircleCI](https://circleci.com/gh/molpopgen/fwdpp/tree/dev.svg?style=svg)](https://circleci.com/gh/molpopgen/fwdpp/tree/dev)</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;# Introduction</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;fwdpp is a C++ template library that abstracts the basic operations required to implement forward-time simulations of population- and quantitative-genetic models.  The library allows the simulation of single populations or metapopulations evolving under the standard evolutionary forces of drift, recombination, migration, and natural selection.  Arbitrary population size changes are also allowed. Different populations in a metapopulation may evolve under different fitness schemes.</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;The library uses advanced C++ techniques to allow arbitrary models to be implemented via the implementation of simple policies (see Documentation section below).  A programmer wishing to use the library will need a strong background in templates, function objects, and the Standard Template Library (STL).  Web resources for these topics vary too much in quality to recommend any particular one.  However, there are several classic books that are must-reads for C++ programmers (old school, I know):</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;1.  Scott Meyer&#39;s &quot;trilogy&quot; of &quot;Effective C++&quot;, &quot;More Effective C++&quot;, and &quot;Effective STL&quot;.</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;2.  Nicolai Josuttis&#39; &quot;The C++ Standard Template Library&quot;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;3.  David Vandevoorde and Nicolai Josuttis, &quot;C++ Templates&quot;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;The first two are excellent books for people already familiar with C++ syntax but want to know more about effective software design using the language. Meyer&#39;s books are particularly good, espectially the first two.  The C++ Templates book is a bible of how to get the most out of templates.  It is a very advanced and detailed book, but I&#39;ve found it helpful over the years.</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;## A note about which version to use</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;This code is distributed via my GitHub [account](http://www.github.com/molpopgen).  The &quot;master&quot; and &quot;dev&quot; branches should be viewed as experimental.  The [releases](https://github.com/molpopgen/fwdpp/releases), however, correspond to tested versions of the library fit for public consumption.  This means that, while the version number in the configure script on master/dev may match that of a recent release, _that does not mean that the features/stability/bugs present in master/dev are identical to those of the release._  If you want to use fwdpp for research, use the latest [release](https://github.com/molpopgen/fwdpp/releases).  If you want to play around with the latest and (occasionally not-so) greatest, look at the dev branch.  If you want to look at the latest I believe to be stable, look at master.  Also note that master may be ahead of dev, etc., depending on what I&#39;ve committed from my development server to the repo stored at github.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;### Revision history</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;[Release notes](@ref md_md_RELEASE_NOTES)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;You should pay particular attention to any statements about backwards compatibility.  If you are updating from a previous version of __fwdpp__, you may wish to read this document regarding how to reproduce results based on previous versions: @ref md_md_preproc.</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;Specific version numbers (&quot;tags&quot; in git-ese, a.k.a. &quot;releases&quot;) will occur when new feature are added to the library and/or bugs are fixed.  The details of what happens in each release can be found [here](@ref md_md_RELEASE_NOTES), beginning with release 0.2.4.</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;## Which C++?</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;As of version 0.2.5, fwdpp requires a compiler supporting the &quot;C++11&quot; version of the language.  Currently, fwdpp requires that your compiler support the flag -std=c++11 in order to use c++11 language features. Recent version of GCC  and clang both support this option, which covers most Linux and OS X users.</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;## Citation</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;The fwdpp manuscript has published in Genetics.  The accepted version of the manuscript is [here](http://www.genetics.org/content/early/2014/06/19/genetics.114.165019.abstract).  For LaTeX users:</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;~~~</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;@Article{,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  author =          {K. R. Thornton},</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  title =   {A C++ Template Library for Efficient Forward-Time Population Genetic Simulation of Large Populations},</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  journal =         {Genetics},</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  year =    {2014},</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  OPTkey =          {},</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  volume =          {198},</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  OPTnumber =       {},</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  pages =   {157-166},</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  OPTmonth =        {},</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  OPTnote =         {},</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  annote =          {doi:/10.1534/genetics.114.165019}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;~~~</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;The version of fwdpp used in that publication is 0.2.4.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;### Where fwdpp is now (compared to the publication).</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;The published version of fwdpp described a library with the following features:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;* Objects (mutations and haploid genomes) are stored only once in _doubly-linked lists_.</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;* Diploids are pairs of pointers to haploid genomes (technically, pairs of iterators derived from the list of haploid genomes).</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;* Gametes contain vectors of pointers (again, C++ iterators) to mutations.</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;* Each generation, extinct mutations and haploid genomes are removed from the population.  This removal is a constant-time operation due to the use of linked lists.</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;This design had a certain elegance to it.  A pointer to a diploid gave you immediate access to the mutations by means of the pointer structure.  It was also compact in memory, because iterators are only 8 bytes (on a 64-bit system) while haploid genomes and mutations are 64 and _at least_ 48 bytes, respectively.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;The fwdpp publication showed that the library performs well in terms of speed compared to other tools out there.  However, the original design had the following problems:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;* Several lookup operations were implemented using expensive linear-time searches.</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;* The linked lists plus the constant insertion and deletion of new and extinct objects, respectively, resulted in memory fragmentation or poor &quot;cache locality&quot;.</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;The 0.3.x releases of fwdpp solved most of the first problem, and sped the library up by over an order of magnitude.  To address the second problem (poor cache locality), I recommended that users link programs based on fwdpp to an external library replacing the built-in malloc (the main memory allocation function for the C family of languages, and C++&#39;s &quot;new&quot; is a wrapper around malloc).  I specifically recommended using Google&#39;s tcmalloc.  It turned out that simply using an industrial-strength memory allocator went a long way towards addressing the performance hit due to memory fragmentation.</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;(These releases also introduced various sub-libraries aimed at making fwdpp easier to use.)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;At this point, intuition (backed up by extensive code profiling using tools like Google&#39;s profiling library and valgrind&#39;s cachegrind) told me that the main hurdle to improving performance was to address memory usage.</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;Release 0.4.4 introduced a fundamental change in the library design:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;* Extinct objects are no longer deleted.  Instead, their locations are recorded in a FIFO queue.  These queues are used to &quot;recycle&quot; already-allocated memory.</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;* (Similarly, fixed variants can be tagged for recycling under many modeling situations.)</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;* Once extinct objects are no longer removed, then there are no longer insertions/removals to/from the middle of containers.  Rather, we either recycle an object, or add a newly-allocated object to the end.</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;* Thus, we can replace doubly-linked lists with vectors.</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;* Further, we can replace iterators with integers.</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;All of these changes were introduced in one fell swoop in 0.4.4, along with a set of other API changes that I&#39;d wanted to make for a while.  The current design is conceptually the same as the published version, with 8 byte keys representing where mutations and haploid genomes are, thus ensuring that an object is only represented once in memory.</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;However, the new design is also less elegant.  Now, the vectors of haploid genomes and mutations have to be passed along with the diploids.</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;So, why do this? __It is a lot faster!__  Simulations of large genomic regions in large populations can be up to 80% faster!  In fact, tcmalloc isn&#39;t necessary to get really good performance any more.  Using it still improves run-times by about 10% (on Intel systems at least...), but that isn&#39;t a lot compared to the 50% improvement that it gave to previous versions of the library.</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;# Documentation</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;## Online</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;A tutorial on policies and the library&#39;s reference manual can be found at [molpopgen.github.io/fwdpp](http://molpopgen.github.io/fwdpp) or [here](@ref md_md_policies).</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;__Note:__ the links above may be out of date, as the online documentation are not regenerated automatically.  If you want the latest, builds the docs from source.</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;## Tutorials</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;__The first few tutorials are out of date due to API changes in 0.4.4.  The basic ideas are the same, but you&#39;ll have to look at the example programs and unit tests for the best HOW-TOs until I fix these documents.__</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;The [fwdpp](http://molpopgen.github.io/fwdpp) main page contains several tutorials:</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;* @ref md_md_datatypes</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;* @ref md_md_policies</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;* @ref md_md_serialization</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;* @ref md_md_sugar</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;## Built from source</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;The source code documentation is in the doc subdirectory that comes with the library.  There are two major pieces of documentation.  First is the detailed documentation of all library functions.  This is generated via [doxygen](http://www.doxygen.org), and the output is a folder called html.  To view the documentation, point a browser to html/index.html.</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;## Example documentation</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;The examples can be read in html form via the online reference manual linked to above.  You can find the two simplest examples online at the fwdpp [wiki](https://github.com/molpopgen/fwdpp/wiki) on github.</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;# Projects using fwdpp:</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;* [fwdpp_perf](https://github.com/molpopgen/fwdpp_perf) is a collection of programs showing how to run independent simulations in a multi-core/many-core environment.  Example programs use either C++11 threads or MPI to run simulations.  I also use this package for performance testing/benchmarking/profiling/etc.</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;* [fwdpy11](https://github.com/molpopgen/fwdpy11) brings fwdpp-powered simulations to the Python programming language.</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;# Dependencies</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;## System requirements</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;You must have the following on your system:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;1. A C++ compiler that supports the C++11 language standard.</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;2. Ideally, one should have the [git](http://git-scm.com/book/en/Getting-Started-Installing-Git) command line tools installed.  These are likely already installed on many systems.</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;We routinely test fwdpp on several different systems with different compilers.  The Travis CI build matrix for fwdpp includes:</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;* A miniconda3 environment using gcc 4.8.5 with [libsequence](http://github.com/molpopgen/libsequence) installed via [bioconda](https://bioconda.github.io/).</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;* GCC 5 or 6 on Ubuntu, with either C++11 or C++14.  [libsequence](http://github.com/molpopgen/libsequence) is not used for these builds.</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;## Library dependencies</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;The minimal dependencies required to use the library to develop simulations are:</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;1.  [GSL](http://gnu.org/software/gsl)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;2.  [zlib](http://zlib.net)</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;In order to compile the example programs, the following dependency is optional as of fwdpp 0.5.7: </div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;1.  [libsequence](http://github.com/molpopgen/libsequence).</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;As of fwdpp 0.7.0, some example programs require the `program_options` library from [boost](http://www.boost.org).  This</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;is one of boost&#39;s runtime libraries, meaning that you need a &quot;full&quot; boost installation. Conda provides such a thing, and</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;Linux variants like Ubuntu provide the different runtime libraries as separate packages.</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;The configure script checks for these optional dependencies and will skip compilation of various example programs if</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;they are missing.</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;In order to compile the unit tests, you also need:</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;1.  [boost](http://www.boost.org).</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;For OS X users, all of the above dependencies are available via [homebrew](http://brew.sh) or [conda](http://conda.pydata.org/docs/)/[bioconda](https://bioconda.github.io).</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;## Performance</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;Performance testing has been moved to the [fwdpp_perf](http://github.com/molpopgen/fwdpp_perf) project.</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;## Obtaining the source code</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;### Obtaining the master branch</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;You have a few options:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;1. Clone the repo (best option): git clone https://github.com/molpopgen/fwdpp.git</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;2. Click on &quot;Download Zip&quot; at https://github.com/molpopgen/fwdpp</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;### Obtaining a specific release</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;Again, a few options:</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;1. Click on &quot;Releases&quot; at https://github.com/molpopgen/fwdpp, then download the one you want</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;2.  Clone the repo (see previous section)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;Or:</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;1. Get a list of releases by saying &quot;git tag -l&quot;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;2. Checkout the release you want.  For example &quot;git checkout 0.2.6&quot;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;Another option is to click on [releases](https://github.com/molpopgen/fwdpp/releases) from the main [project page](https://github.com/molpopgen/fwdpp) at github.</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;On a decent browser, when you click on a release, it should be called fwdpp-version.tar.gz.  Sometimes, though, you may get version.tar.gz.  This is a browser-by-github interaction problem.  On my systems, I get the correct result.</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;# Installation</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;## What does fwdpp install?</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;Two things:</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;* The library itself, which is simply a set of C++ header files</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;* A single binary called fwdppConfig, which you may use to check what version you have installed on your system.</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;~~~{sh}</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;fwdppConfig --version</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;~~~</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;fwdppConfig was introduced in version 0.3.3.  Its main raison d&#39;etre is in helping other configure scripts test for what version is on their system.  For example, which may go into a configure.ac file for your project:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;~~~{sh}</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;dnl Check that fwdpp version is sufficient</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;if test &quot;$FWDPPVERSION&quot; &gt; &quot;0.3.2&quot;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;then</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   echo &quot;fwdpp version $FWDPPVERSION detected&quot;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;else</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   AC_MSG_ERROR([fwdpp &gt;= 0.3.3 required, please install from http://github.com/molpopgen/fwdpp])</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;fi</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;~~~</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;## The case of a standard system with all dependencies installed in standard locations</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;If you cloned the git repo:</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;~~~</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;cd fwdpp</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;~~~</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;If you downloaded a release:</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;~~~</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;tar xzf fwdpp-version.tar.gz</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;cd fwdpp-version</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;~~~</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;Then:</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;~~~</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;./configure</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;make</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;make install</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;~~~</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;To compile examples and unit tests, and to execute unit tests:</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;~~~</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;make check</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;~~~</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;Currently, the example programs will not get installed via &quot;make install&quot;.   If you want them to be installed system-wide, copy the binaries manually to where you need them.</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;## To compile examples and unit tests</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;__Note:__ if you only wish to compile the example programgs, issue the &#39;make check&#39; command from the example subdirectory.  This will allow users without boost on their system to compile the examples but not attempt to compile the unit tests (which will fail to compile on systems without boost).</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;You will need [libsequence](http://github.com/molpopgen/libsequence) installed on your system in order to compile the example programs.</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;## If dependent libraries are in non-stanard locations.</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;For example, if libsequence is in /opt:</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;~~~{.sh}</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;#Note, you need to add in the desired optimization (-OXX) level:</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;CPPFLAGS=&quot;-I/opt/include&quot; LDFLAGS=&quot;$LDFLAGS -L/opt/lib -Wl,-rpath/opt/lib&quot; ./configure </div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;make check</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;make install</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;~~~</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;The &quot;-Wl,-rpath&quot; business adds the library path locations into the compiled binaries.  The flags work on GCC and clang</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;compilers, and are often handy when using systems like Anaconda or Homebrew to manage dependencies.</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;## Installing in a custom location</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;~~~</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;./configure --prefix=/path/2/where/you/want it</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;~~~</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;For example:</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;~~~</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;./configure --prefix=$HOME</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;~~~</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;## Examples</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;The examples are documented [here](@ref md_md_examples)</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
